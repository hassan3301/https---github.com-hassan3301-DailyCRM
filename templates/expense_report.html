<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Expense Report</title>
    <style>
        body { font-family: sans-serif; font-size: 12px; }
        h1 { font-size: 18px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 8px; border: 1px solid #ccc; }
        th { background-color: #f5f5f5; }
    </style>
</head>
<body>
    <h1>Expense Report ({{ period.replace('_', ' ').title() }})</h1>
    <p><strong>Total Expenses:</strong> ${{ total_expenses }}</p>
    <p><strong>Number of Expenses:</strong> {{ expense_count }}</p>

    <h2>Breakdown by Category</h2>
    <ul>
    {% for cat, amt in categories.items() %}
        <li><strong>{{ cat }}:</strong> ${{ "%.2f"|format(amt) }}</li>
    {% endfor %}
    </ul>

    <h2>Details</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Category ID</th>
            </tr>
        </thead>
        <tbody>
        {% for e in expense_details %}
            <tr>
                <td>{{ e.date }}</td>
                <td>{{ e.description }}</td>
                <td>${{ "%.2f"|format(e.amount) }}</td>
                <td>{{ e.category_id }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</body>
</html>
